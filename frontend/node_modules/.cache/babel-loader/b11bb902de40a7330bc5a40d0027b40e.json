{"ast":null,"code":"/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { initMetric } from './lib/initMetric.js';\n\nconst afterLoad = callback => {\n  if (document.readyState === 'complete') {\n    // Queue a task so the callback runs after `loadEventEnd`.\n    setTimeout(callback, 0);\n  } else {\n    // Queue a task so the callback runs after `loadEventEnd`.\n    addEventListener('load', () => setTimeout(callback, 0));\n  }\n};\n\nconst getNavigationEntryFromPerformanceTiming = () => {\n  // Really annoying that TypeScript errors when using `PerformanceTiming`.\n  const timing = performance.timing;\n  const navigationEntry = {\n    entryType: 'navigation',\n    startTime: 0\n  };\n\n  for (const key in timing) {\n    if (key !== 'navigationStart' && key !== 'toJSON') {\n      navigationEntry[key] = Math.max(timing[key] - timing.navigationStart, 0);\n    }\n  }\n\n  return navigationEntry;\n};\n\nexport const getTTFB = onReport => {\n  const metric = initMetric('TTFB');\n  afterLoad(() => {\n    try {\n      // Use the NavigationTiming L2 entry if available.\n      const navigationEntry = performance.getEntriesByType('navigation')[0] || getNavigationEntryFromPerformanceTiming();\n      metric.value = metric.delta = navigationEntry.responseStart; // In some cases the value reported is negative or is larger\n      // than the current page time. Ignore these cases:\n      // https://github.com/GoogleChrome/web-vitals/issues/137\n      // https://github.com/GoogleChrome/web-vitals/issues/162\n\n      if (metric.value < 0 || metric.value > performance.now()) return;\n      metric.entries = [navigationEntry];\n      onReport(metric);\n    } catch (error) {// Do nothing.\n    }\n  });\n};","map":{"version":3,"names":["initMetric","afterLoad","callback","document","readyState","setTimeout","addEventListener","getNavigationEntryFromPerformanceTiming","timing","performance","navigationEntry","entryType","startTime","key","Math","max","navigationStart","getTTFB","onReport","metric","getEntriesByType","value","delta","responseStart","now","entries","error"],"sources":["/Users/danny/Github/physics_engine_for_the_web/frontend/node_modules/web-vitals/dist/modules/getTTFB.js"],"sourcesContent":["/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { initMetric } from './lib/initMetric.js';\nconst afterLoad = (callback) => {\n    if (document.readyState === 'complete') {\n        // Queue a task so the callback runs after `loadEventEnd`.\n        setTimeout(callback, 0);\n    }\n    else {\n        // Queue a task so the callback runs after `loadEventEnd`.\n        addEventListener('load', () => setTimeout(callback, 0));\n    }\n};\nconst getNavigationEntryFromPerformanceTiming = () => {\n    // Really annoying that TypeScript errors when using `PerformanceTiming`.\n    const timing = performance.timing;\n    const navigationEntry = {\n        entryType: 'navigation',\n        startTime: 0,\n    };\n    for (const key in timing) {\n        if (key !== 'navigationStart' && key !== 'toJSON') {\n            navigationEntry[key] = Math.max(timing[key] -\n                timing.navigationStart, 0);\n        }\n    }\n    return navigationEntry;\n};\nexport const getTTFB = (onReport) => {\n    const metric = initMetric('TTFB');\n    afterLoad(() => {\n        try {\n            // Use the NavigationTiming L2 entry if available.\n            const navigationEntry = performance.getEntriesByType('navigation')[0] ||\n                getNavigationEntryFromPerformanceTiming();\n            metric.value = metric.delta =\n                navigationEntry.responseStart;\n            // In some cases the value reported is negative or is larger\n            // than the current page time. Ignore these cases:\n            // https://github.com/GoogleChrome/web-vitals/issues/137\n            // https://github.com/GoogleChrome/web-vitals/issues/162\n            if (metric.value < 0 || metric.value > performance.now())\n                return;\n            metric.entries = [navigationEntry];\n            onReport(metric);\n        }\n        catch (error) {\n            // Do nothing.\n        }\n    });\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,UAAT,QAA2B,qBAA3B;;AACA,MAAMC,SAAS,GAAIC,QAAD,IAAc;EAC5B,IAAIC,QAAQ,CAACC,UAAT,KAAwB,UAA5B,EAAwC;IACpC;IACAC,UAAU,CAACH,QAAD,EAAW,CAAX,CAAV;EACH,CAHD,MAIK;IACD;IACAI,gBAAgB,CAAC,MAAD,EAAS,MAAMD,UAAU,CAACH,QAAD,EAAW,CAAX,CAAzB,CAAhB;EACH;AACJ,CATD;;AAUA,MAAMK,uCAAuC,GAAG,MAAM;EAClD;EACA,MAAMC,MAAM,GAAGC,WAAW,CAACD,MAA3B;EACA,MAAME,eAAe,GAAG;IACpBC,SAAS,EAAE,YADS;IAEpBC,SAAS,EAAE;EAFS,CAAxB;;EAIA,KAAK,MAAMC,GAAX,IAAkBL,MAAlB,EAA0B;IACtB,IAAIK,GAAG,KAAK,iBAAR,IAA6BA,GAAG,KAAK,QAAzC,EAAmD;MAC/CH,eAAe,CAACG,GAAD,CAAf,GAAuBC,IAAI,CAACC,GAAL,CAASP,MAAM,CAACK,GAAD,CAAN,GAC5BL,MAAM,CAACQ,eADY,EACK,CADL,CAAvB;IAEH;EACJ;;EACD,OAAON,eAAP;AACH,CAdD;;AAeA,OAAO,MAAMO,OAAO,GAAIC,QAAD,IAAc;EACjC,MAAMC,MAAM,GAAGnB,UAAU,CAAC,MAAD,CAAzB;EACAC,SAAS,CAAC,MAAM;IACZ,IAAI;MACA;MACA,MAAMS,eAAe,GAAGD,WAAW,CAACW,gBAAZ,CAA6B,YAA7B,EAA2C,CAA3C,KACpBb,uCAAuC,EAD3C;MAEAY,MAAM,CAACE,KAAP,GAAeF,MAAM,CAACG,KAAP,GACXZ,eAAe,CAACa,aADpB,CAJA,CAMA;MACA;MACA;MACA;;MACA,IAAIJ,MAAM,CAACE,KAAP,GAAe,CAAf,IAAoBF,MAAM,CAACE,KAAP,GAAeZ,WAAW,CAACe,GAAZ,EAAvC,EACI;MACJL,MAAM,CAACM,OAAP,GAAiB,CAACf,eAAD,CAAjB;MACAQ,QAAQ,CAACC,MAAD,CAAR;IACH,CAdD,CAeA,OAAOO,KAAP,EAAc,CACV;IACH;EACJ,CAnBQ,CAAT;AAoBH,CAtBM"},"metadata":{},"sourceType":"module"}