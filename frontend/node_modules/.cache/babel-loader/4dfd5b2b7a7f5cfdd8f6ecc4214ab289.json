{"ast":null,"code":"/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { bindReporter } from './lib/bindReporter.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onBFCacheRestore } from './lib/onBFCacheRestore.js';\nimport { onHidden } from './lib/onHidden.js';\nimport { firstInputPolyfill, resetFirstInputPolyfill } from './lib/polyfills/firstInputPolyfill.js';\nexport const getFID = (onReport, reportAllChanges) => {\n  const visibilityWatcher = getVisibilityWatcher();\n  let metric = initMetric('FID');\n  let report;\n\n  const entryHandler = entry => {\n    // Only report if the page wasn't hidden prior to the first input.\n    if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n      metric.value = entry.processingStart - entry.startTime;\n      metric.entries.push(entry);\n      report(true);\n    }\n  };\n\n  const po = observe('first-input', entryHandler);\n  report = bindReporter(onReport, metric, reportAllChanges);\n\n  if (po) {\n    onHidden(() => {\n      po.takeRecords().map(entryHandler);\n      po.disconnect();\n    }, true);\n  }\n\n  if (window.__WEB_VITALS_POLYFILL__) {\n    // Prefer the native implementation if available,\n    if (!po) {\n      window.webVitals.firstInputPolyfill(entryHandler);\n    }\n\n    onBFCacheRestore(() => {\n      metric = initMetric('FID');\n      report = bindReporter(onReport, metric, reportAllChanges);\n      window.webVitals.resetFirstInputPolyfill();\n      window.webVitals.firstInputPolyfill(entryHandler);\n    });\n  } else {\n    // Only monitor bfcache restores if the browser supports FID natively.\n    if (po) {\n      onBFCacheRestore(() => {\n        metric = initMetric('FID');\n        report = bindReporter(onReport, metric, reportAllChanges);\n        resetFirstInputPolyfill();\n        firstInputPolyfill(entryHandler);\n      });\n    }\n  }\n};","map":{"version":3,"names":["bindReporter","getVisibilityWatcher","initMetric","observe","onBFCacheRestore","onHidden","firstInputPolyfill","resetFirstInputPolyfill","getFID","onReport","reportAllChanges","visibilityWatcher","metric","report","entryHandler","entry","startTime","firstHiddenTime","value","processingStart","entries","push","po","takeRecords","map","disconnect","window","__WEB_VITALS_POLYFILL__","webVitals"],"sources":["/Users/danny/Github/physics_engine_for_the_web/frontend/node_modules/web-vitals/dist/modules/getFID.js"],"sourcesContent":["/*\n * Copyright 2020 Google LLC\n *\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *\n *     https://www.apache.org/licenses/LICENSE-2.0\n *\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\nimport { bindReporter } from './lib/bindReporter.js';\nimport { getVisibilityWatcher } from './lib/getVisibilityWatcher.js';\nimport { initMetric } from './lib/initMetric.js';\nimport { observe } from './lib/observe.js';\nimport { onBFCacheRestore } from './lib/onBFCacheRestore.js';\nimport { onHidden } from './lib/onHidden.js';\nimport { firstInputPolyfill, resetFirstInputPolyfill } from './lib/polyfills/firstInputPolyfill.js';\nexport const getFID = (onReport, reportAllChanges) => {\n    const visibilityWatcher = getVisibilityWatcher();\n    let metric = initMetric('FID');\n    let report;\n    const entryHandler = (entry) => {\n        // Only report if the page wasn't hidden prior to the first input.\n        if (entry.startTime < visibilityWatcher.firstHiddenTime) {\n            metric.value = entry.processingStart - entry.startTime;\n            metric.entries.push(entry);\n            report(true);\n        }\n    };\n    const po = observe('first-input', entryHandler);\n    report = bindReporter(onReport, metric, reportAllChanges);\n    if (po) {\n        onHidden(() => {\n            po.takeRecords().map(entryHandler);\n            po.disconnect();\n        }, true);\n    }\n    if (window.__WEB_VITALS_POLYFILL__) {\n        // Prefer the native implementation if available,\n        if (!po) {\n            window.webVitals.firstInputPolyfill(entryHandler);\n        }\n        onBFCacheRestore(() => {\n            metric = initMetric('FID');\n            report = bindReporter(onReport, metric, reportAllChanges);\n            window.webVitals.resetFirstInputPolyfill();\n            window.webVitals.firstInputPolyfill(entryHandler);\n        });\n    }\n    else {\n        // Only monitor bfcache restores if the browser supports FID natively.\n        if (po) {\n            onBFCacheRestore(() => {\n                metric = initMetric('FID');\n                report = bindReporter(onReport, metric, reportAllChanges);\n                resetFirstInputPolyfill();\n                firstInputPolyfill(entryHandler);\n            });\n        }\n    }\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAASA,YAAT,QAA6B,uBAA7B;AACA,SAASC,oBAAT,QAAqC,+BAArC;AACA,SAASC,UAAT,QAA2B,qBAA3B;AACA,SAASC,OAAT,QAAwB,kBAAxB;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,QAAT,QAAyB,mBAAzB;AACA,SAASC,kBAAT,EAA6BC,uBAA7B,QAA4D,uCAA5D;AACA,OAAO,MAAMC,MAAM,GAAG,CAACC,QAAD,EAAWC,gBAAX,KAAgC;EAClD,MAAMC,iBAAiB,GAAGV,oBAAoB,EAA9C;EACA,IAAIW,MAAM,GAAGV,UAAU,CAAC,KAAD,CAAvB;EACA,IAAIW,MAAJ;;EACA,MAAMC,YAAY,GAAIC,KAAD,IAAW;IAC5B;IACA,IAAIA,KAAK,CAACC,SAAN,GAAkBL,iBAAiB,CAACM,eAAxC,EAAyD;MACrDL,MAAM,CAACM,KAAP,GAAeH,KAAK,CAACI,eAAN,GAAwBJ,KAAK,CAACC,SAA7C;MACAJ,MAAM,CAACQ,OAAP,CAAeC,IAAf,CAAoBN,KAApB;MACAF,MAAM,CAAC,IAAD,CAAN;IACH;EACJ,CAPD;;EAQA,MAAMS,EAAE,GAAGnB,OAAO,CAAC,aAAD,EAAgBW,YAAhB,CAAlB;EACAD,MAAM,GAAGb,YAAY,CAACS,QAAD,EAAWG,MAAX,EAAmBF,gBAAnB,CAArB;;EACA,IAAIY,EAAJ,EAAQ;IACJjB,QAAQ,CAAC,MAAM;MACXiB,EAAE,CAACC,WAAH,GAAiBC,GAAjB,CAAqBV,YAArB;MACAQ,EAAE,CAACG,UAAH;IACH,CAHO,EAGL,IAHK,CAAR;EAIH;;EACD,IAAIC,MAAM,CAACC,uBAAX,EAAoC;IAChC;IACA,IAAI,CAACL,EAAL,EAAS;MACLI,MAAM,CAACE,SAAP,CAAiBtB,kBAAjB,CAAoCQ,YAApC;IACH;;IACDV,gBAAgB,CAAC,MAAM;MACnBQ,MAAM,GAAGV,UAAU,CAAC,KAAD,CAAnB;MACAW,MAAM,GAAGb,YAAY,CAACS,QAAD,EAAWG,MAAX,EAAmBF,gBAAnB,CAArB;MACAgB,MAAM,CAACE,SAAP,CAAiBrB,uBAAjB;MACAmB,MAAM,CAACE,SAAP,CAAiBtB,kBAAjB,CAAoCQ,YAApC;IACH,CALe,CAAhB;EAMH,CAXD,MAYK;IACD;IACA,IAAIQ,EAAJ,EAAQ;MACJlB,gBAAgB,CAAC,MAAM;QACnBQ,MAAM,GAAGV,UAAU,CAAC,KAAD,CAAnB;QACAW,MAAM,GAAGb,YAAY,CAACS,QAAD,EAAWG,MAAX,EAAmBF,gBAAnB,CAArB;QACAH,uBAAuB;QACvBD,kBAAkB,CAACQ,YAAD,CAAlB;MACH,CALe,CAAhB;IAMH;EACJ;AACJ,CA3CM"},"metadata":{},"sourceType":"module"}